{
  "hash": "134203edbc12e39bd254e0082e57a2fe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Adaptive Methods for Clinical Trials\"\ndescription: \"A simulation approach to adaptive clinical trial designs\"\nauthor:\n  - name: Basil Okola\n    url: https://bokola.github.io/\n    # orcid: 0000-0002-5300-3075\n    affiliation: Master of Statistics and Data Science @ Hasselt University\n    affiliation-url: https://ucsb-meds.github.io/ \ndate: 2026-01-12\ncode-fold: true\ncategories: [biostatistics,adaptive designs, interim analysis, simulations] # self-defined categories\n# include-after-body: pub_ready_viz.html\ncitation: \n  url: https://bokola.github.io/posts/2026-01-12-Adaptive-designs/ \n\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\nbibliography: reference.bib\n---\n\n# Adaptive trials: A study reproducibility simulation approach [@jayawardana2025practical]\n\nAdaptive trials allow for modifications along the course of the trials. Common \nmodifications include sample size adjustment, dropping an arm (if futile), or \neven adjusting allocation probabilities. Group sequential design is one of the \nmost utilized forms of adaptive designs allowing for multiple planned interim \nanalyses with pre-specified rules for early stopping. Here, we take a simulation\napproach to understand adaptive designs.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(flextable, dplyr, future.apply, progressr)\n```\n:::\n\n\n\n## Randomisation\n\nFor simplicity, we use 1:1 treatment allocation ratio using block randomisation\nof size 4. Uniform random numbers are used to to order treatment allocations\nthereby producing a sequential list of treatment allocations for consecutively\nrecruited participants.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Randomize participants to treatment arms\n#'\n#' @param n sample size\n#' @param blocks randomisation blocks\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nsimRandomisation <- function(n=584, blocks = 4){\n  # blocking sequnce\n  block <- rep(seq(1:n), each = blocks, length.out = n)\n  # treatment sequence\n  trt <- rep(0:1, length.out = n)\n  # a random number on a unit interval\n  set.seed(as.numeric(Sys.Date()))\n  random <- runif(n)\n  df <- data.frame(block, trt, random)\n  df <- df[order(df$block, df$random),]\n  df$obs <- 1:n\n  df <- df[, c(\"obs\", \"trt\")]\n  return(df)\n}\n```\n:::\n\n\nIf we wanted to adjust allocation ratios:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Randomize participants to treatment arms\n#'\n#' @param n sample size\n#' @param blocks randomisation blocks\n#' @param ratio randomization ratio\n#' \n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nsimRandomisation <- function(n = 584, blocks = 4, ratio = c(1, 1)) {\n\n  # 1. Define the possible treatment groups (0, 1, 2...) based on ratio length\n  trts <- 0:(length(ratio) - 1)\n  \n  # 2. Create the sequence by sampling within each block\n  # We use 'replicate' to generate each block independently\n  num_blocks <- ceiling(n / blocks)\n  \n  result <- replicate(num_blocks, {\n    sample(trts, size = blocks, replace = TRUE, prob = ratio)\n  })\n  \n  # 3. Flatten the matrix into a vector and trim to length n\n  trt_vector <- as.vector(result)[1:n]\n  \n  # 4. Return as a clean data frame\n  return(data.frame(obs = 1:n, trt = trt_vector))\n}\n```\n:::\n\n\n## Participant accrual\n\nWe assume participant accrual is constant over time and would take 928 days.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Simulate participant accrual\n#'\n#' @param n sample size\n#' @param recruit_period accrual period in days\n#'\n#' @returns a vector\n#' @export\n#'\n#' @examples\nsimAccrual <- function(n = 584, recruit_period = 928){\n  # simulate trial times that patient enters the trial\n  # adding 0.5 to ensure recruitment times > day 1 when rounded\n  accrual_time <- round(runif(n) * recruit_period + 0.5)\n  accrual_time <- sort(accrual_time)\n  return(accrual_time)\n}\n```\n:::\n\n\nIf patient accrual was not constant over time, we'd consider a beta distribution\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Simulate participant accrual\n#'\n#' @param n sample size\n#' @param recruit_period accrual period (days)\n#' @param alpha alpha shape parameter\n#' @param beta beta shape parameter\n#'\n#' @returnsa vector\n#' @export\n#'\n#' @examples\nsimAccrual <- function(n = 584, recruit_period = 928, alpha = 1, beta = 1) {\n  \n  # 1. Generate random numbers using a Beta distribution\n  # rbeta(n, shape1, beta) returns values between 0 and 1\n  # alpha= beta = 1 is equivalent to runif (constant accrual)\n  # alpha= 2, beta = 1 creates a \"late peak\" (accelerating accrual)\n  # alpha= 1, beta = 2 creates an \"early peak\" (decelerating accrual)\n  # alpha= 2, beta = 2 creates a \"bell curve\" (peak in middle)\n  \n  accrual_proportions <- rbeta(n, alpha, beta)\n  \n  # 2. Scale the 0-1 values to the actual recruit_period\n  accrual_time <- round(accrual_proportions * recruit_period + 0.5)\n  \n  # 3. Sort to represent chronological entry\n  accrual_time <- sort(accrual_time)\n  \n  return(accrual_time)\n}\n```\n:::\n\n\n## Generate participant outcomes\n\nChoice of probability distribution depends on the outcome variable. You could use\nthe binomial distribution for a binary outcome, normal distribution for a continuous\noutcome, or Weibull/exponential for time-to-event outcome.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Simulate trial data with outcome variable\n#'\n#' @param n sample size\n#' @param recruit_period recruitment period (days)\n#' @param p vactor of event probabilities\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nsimTrialData <- function(n = 584, recruit_period = 928, p){\n  # simulate random allocations\n  data <- simRandomisation()\n  # simulate accrual\n  data$accrual <- simAccrual()\n  # simulate events from binomial dist\n  data$event <- rbinom(n, 1, p[data$trt+1])\n  \n  return(data)\n}\n```\n:::\n\n\n\n## Identify data available at interim analysis\n\nWe assume outcome to be available immediately after recruitment and the time of \ninterim analysis to be when a pre-determined number of events to be 20. As the data\nis ordered by accrual time, we can calculate cumulative number of events `cum_events`\nwith `cum_events=20` indicating the planned time of the interim analysis. Since\nwe assume no time lag between recruitment and outcome assessment, the outcome at\nthe interim (`event_iterim: 0,1`) would be the same as the outcome at final time\npoint (`event`) for participants included in the interim analysis (i.e.,\nfor observations where `obs <= interim_ind`)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Identify interim data  \n#'\n#' @param data a dataframe\n#' @param events_at_interim number of events at interim\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nsimInterimData <- function(data, events_at_interim = 20){\n  # cumulative events\n  data$cum_events <- cumsum(data$event)\n  # when does interim occur\n  data$interim_ind <- data$obs[min(which(data$cum_events == events_at_interim))]\n  # events at interim\n  data$event_interim <- with(data, ifelse(obs <= interim_ind, event, NA))\n  \n  return(data)\n}\n```\n:::\n\n\n## Analyze trial data\n\nDuring interim analysis we seek to find out:\n\n* if trial would have stopped before maximum recruitment\n* point estimates and their CIs for treatment effect\n* sample size at the point of stopping the trial\n* if the study would have found evidence of clinically relevant treatment effect\nor if it was a futile trial\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Analyze trial data\n#'\n#' @param data trial dataframe\n#' @param alpha_interim alpha spend at interim analysis\n#' @param alpha_final alpha spend at final analysis\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nanalyseData <- function(data, alpha_interim, alpha_final){\n  nevents0 <- sum(data$event[data$trt == 0])\n  nevents1 <- sum(data$event[data$trt == 1])\n  pevents0 <- nevents0/sum(data$trt ==0)\n  pevents1 <- nevents1/sum(data$trt ==1)\n  \n  # logistic reg at interim\n  data$event_interim <- factor(data$event_interim)\n  logit_interim <- glm(event_interim ~ trt, data = data, family = \"binomial\")\n  conf_int <- confint(logit_interim)\n  \n  # results at interim\n  \n  interim_or <- exp(coef(logit_interim)[\"trt\"])\n  interim_lci <- exp(conf_int[\"trt\", \"2.5 %\"])\n  interim_uci <- exp(conf_int[\"trt\", \"97.5 %\"])\n  interim_p <- coef(summary(logit_interim))[\"trt\", \"Pr(>|z|)\"]\n  \n  # stop for trial success at interim\n  interim_stop <- ifelse(interim_p < alpha_interim, 1, 0)\n  \n  # the proportion of events if the trial stopped at interim\n  \n  if(interim_stop == 1){\n    nevents0 <- sum(data$event[data$trt == 0 & !is.na(data$event_interim)])\n    nevents1 <- sum(data$event[data$trt == 1 & !is.na(data$event_interim)])\n    pevents0 <- nevents0/sum(data$trt == 0 & !is.na(data$event_interim))\n    pevents1 <- nevents1/sum(data$trt == 1 & !is.na(data$event_interim))\n  }\n  # final analysis\n  data$event <- factor(data$event)\n  logit <- glm(event ~ trt, data = data, family = \"binomial\")\n  conf <- confint(logit)\n  \n  # results at final analysis\n  final_or <- exp(coef(logit)[\"trt\"])\n  final_lci <- exp(conf[\"trt\", \"2.5 %\"])\n  final_uci <- exp(conf[\"trt\", \"97.5 %\"])\n  final_p <- coef(summary(logit))[\"trt\", \"Pr(>|z|)\"]\n  \n  final_stop <- ifelse(final_p < alpha_final, 1, 0)\n  \n  # is the trial conclusive?\n  stop <- ifelse(interim_stop == 1, interim_stop, final_stop)\n  \n  # sample size (used to determine average sample size)\n  \n  if(interim_stop == 1){\n    sample_size <- unique(data$interim_ind)\n  } else{\n    sample_size <- nrow(data)\n  }\n  \n  # determine trial flip-flop probability\n  flipflop <- ifelse(interim_stop == 1 & final_stop == 0, 1, 0)\n  \n  results <- data.frame(\n    nevents0, nevents1, pevents0, pevents1, sample_size,\n    interim_time = unique(data$interim_ind),\n    interim_or, interim_lci, interim_uci, interim_p, interim_stop,\n    final_or, final_lci, final_uci, final_p, final_stop, stop, flipflop\n  )\n  return(results)\n}\n```\n:::\n\n\nAvoid in model.matrix.default(mt, mf, contrasts) : variable 1 has no levels errors\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Analyze trial data\n#'\n#' @param data trial dataframe\n#' @param alpha_interim alpha spend at interim analysis\n#' @param alpha_final alpha spend at final analysis\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\n#' \n\n\nanalyseData <- function(data, alpha_interim, alpha_final){\n  \n  # Helper to check if GLM can run (needs variation in both Y and X)\n  is_estimable <- function(df, outcome_col) {\n    if (nrow(df) == 0) return(FALSE)\n    has_outcome_var <- length(unique(df[[outcome_col]])) > 1\n    has_trt_var     <- length(unique(df$trt)) > 1\n    return(has_outcome_var && has_trt_var)\n  }\n\n  # --- Initial Calculations (Total Trial potential) ---\n  nevents0 <- sum(data$event[data$trt == 0], na.rm = TRUE)\n  nevents1 <- sum(data$event[data$trt == 1], na.rm = TRUE)\n  pevents0 <- nevents0 / sum(data$trt == 0)\n  pevents1 <- nevents1 / sum(data$trt == 1)\n  \n  # --- Interim Analysis ---\n  # Filter data to only those available at interim for the model\n  interim_data <- data[!is.na(data$event_interim), ]\n  interim_estimable <- is_estimable(interim_data, \"event_interim\")\n  \n  if(interim_estimable){\n    logit_interim <- glm(factor(event_interim) ~ trt, data = interim_data, family = \"binomial\")\n    interim_p     <- coef(summary(logit_interim))[\"trt\", \"Pr(>|z|)\"]\n    conf_int      <- confint.default(logit_interim) \n    interim_or    <- exp(coef(logit_interim)[\"trt\"])\n    interim_lci   <- exp(conf_int[\"trt\", 1])\n    interim_uci   <- exp(conf_int[\"trt\", 2])\n  } else {\n    interim_p <- interim_or <- interim_lci <- interim_uci <- NA\n  }\n  \n  # Stop for trial success at interim\n  interim_stop <- ifelse(!is.na(interim_p) && interim_p < alpha_interim, 1, 0)\n  \n  # Update event stats if the trial stopped at interim\n  if(interim_stop == 1){\n    nevents0 <- sum(interim_data$event[interim_data$trt == 0])\n    nevents1 <- sum(interim_data$event[interim_data$trt == 1])\n    pevents0 <- nevents0 / sum(interim_data$trt == 0)\n    pevents1 <- nevents1 / sum(interim_data$trt == 1)\n    sample_size <- nrow(interim_data)\n  } else {\n    sample_size <- nrow(data)\n  }\n  \n  # --- Final Analysis ---\n  final_estimable <- is_estimable(data, \"event\")\n  \n  if(final_estimable){\n    logit    <- glm(factor(event) ~ trt, data = data, family = \"binomial\")\n    final_p  <- coef(summary(logit))[\"trt\", \"Pr(>|z|)\"]\n    conf     <- confint.default(logit)\n    final_or  <- exp(coef(logit)[\"trt\"])\n    final_lci <- exp(conf[\"trt\", 1])\n    final_uci <- exp(conf[\"trt\", 2])\n  } else {\n    final_p <- final_or <- final_lci <- final_uci <- NA\n  }\n  \n  final_stop <- ifelse(!is.na(final_p) && final_p < alpha_final, 1, 0)\n  \n  # --- Logic Summary ---\n  stop     <- ifelse(interim_stop == 1, 1, final_stop)\n  flipflop <- ifelse(interim_stop == 1 & final_stop == 0, 1, 0)\n  \n  # Build the final data frame\n  results <- data.frame(\n    nevents0, \n    nevents1, \n    pevents0, \n    pevents1, \n    sample_size,\n    interim_time = max(data$interim_ind, na.rm = TRUE), # Assuming this is a time-point or ID\n    interim_or, \n    interim_lci, \n    interim_uci, \n    interim_p, \n    interim_stop,\n    final_or, \n    final_lci, \n    final_uci, \n    final_p, \n    final_stop, \n    stop, \n    flipflop\n  )\n  \n  return(results)\n}\n```\n:::\n\n\n\n## Simulate a single trial\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#' Run a single experiment\n#'\n#' @param n sample size\n#' @param recruit_period accrual period\n#' @param p vector of treatment success probability\n#' @param events_at_interim number of events at interim\n#' @param alpha_interim interim alpha spend\n#' @param alpha_final final alpha spend\n#'\n#' @returns a dataframe\n#' @export\n#'\n#' @examples\nrunTrial <- function(n, recruit_period, p, events_at_interim, alpha_interim, alpha_final){\n  #1. simulate trial data\n  df <- simTrialData(n, recruit_period, p)\n  #2. create interim data\n  df <- simInterimData(df, events_at_interim)\n  #3. Analyze data\n  results <- analyseData(df, alpha_interim, alpha_final)\n  return(list(data = df, results = results))\n}\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# inputs\ninputs <- data.frame(\n  seed = as.numeric(Sys.Date()),\n  # recruitment period = Days in 2.5 years   \n  #584/690 is the target/total possible = efficiency ratio\n  recruit_period = 365.25 * 3 * 584/ 690,\n  n = 584,\n  events_at_interim = 20,\n  p0 = 0.10,\n  p1 = 0.04,\n  # p = c(p0, p1)\n  alpha_final = 0.045,\n  alpha_interim = 0.005\n  \n)\np <- c(inputs$p0, inputs$p1)\n\ndict <- data.frame(\n  variable = c(\n    'nevents0','nevents1', 'pevents0', 'pevents1', 'sample_size', 'interim_time',\n    \"interim_or\", \"interim_lci\", \"interim_uci\", \"interim_p\", \"interim_stop\",\n    \"final_or\", \"final_lci\", \"final_uci\", \"final_p\", \"final_stop\", \"stop\",\n    \"flipflop\"\n  ),\n  label = c(\n    \"Number of events in control group\",\n    \"Number of events in experimental group\",\n    \"Proportion of events in control group\",\n    \"Proportion of events in experimental group\",\n    \"Sample size\",\n    \"Time (days) at interim\",\n    \"Odds ratio at interim\",\n    \"Lower CI for OR at interim\",\n    \"Upper CI for OR at interim\",\n    \"P-value of any difference in treatments at interim\",\n    \"Whether the trial would have stopped at interim\",\n    \"Odds ratio at final analysis\",\n    \"Lower CI for odds ratio\",\n    \"Upper CI for odds ratio\",\n    \"P-value for treatment difference at final analysis\",\n    \"Whether the trial is conclusive at final analysis\",\n    \"Whether the trial was conclusive (at final or interim)\",\n    \"The probability of trial flip-flopping\"\n    \n    \n  )\n)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(inputs$seed)\n\nresults_singleTrial <- runTrial(\n  inputs$n, inputs$recruit_period, p, inputs$events_at_interim,\n  inputs$alpha_interim, inputs$alpha_final\n)\nresults <- results_singleTrial$results|> round(3)  |> t() |> as.data.frame() \nnames(results)[1] <- \"value\"\nresults$variable <- rownames(results)\nrownames(results) <- NULL\nresults <- left_join(results, dict)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(variable)`\n```\n\n\n:::\n\n```{.r .cell-code}\nresults <- results[, c(\"variable\", \"label\", \"value\")]\n```\n:::\n\n\n\n::: {#tbl-singleT .cell tbl-cap='Results from a single simulated trial'}\n\n```{.r .cell-code}\ntab_singleT <- flextable(results) |> theme_vanilla() \ntab_singleT\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-ec37bde4{}.cl-ec1a9764{font-family:'DejaVu Sans';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ec1a97a0{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ec28ac46{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ec28ac64{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ec29119a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911b8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911cc{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911d6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911ea{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911f4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911fe{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ec2911ff{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-ec37bde4'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-ec29119a\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a9764\">variable</span></p></th><th class=\"cl-ec29119a\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a9764\">label</span></p></th><th class=\"cl-ec2911b8\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a9764\">value</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911cc\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">nevents0</span></p></td><td class=\"cl-ec2911cc\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Number of events in control group</span></p></td><td class=\"cl-ec2911d6\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">16.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">nevents1</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Number of events in experimental group</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">4.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">pevents0</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Proportion of events in control group</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.140</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">pevents1</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Proportion of events in experimental group</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.030</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">sample_size</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Sample size</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">249.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_time</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Time (days) at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">249.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_or</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Odds ratio at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.187</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_lci</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Lower CI for OR at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.061</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_uci</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Upper CI for OR at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.577</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_p</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">P-value of any difference in treatments at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.004</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">interim_stop</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Whether the trial would have stopped at interim</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">final_or</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Odds ratio at final analysis</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.305</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">final_lci</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Lower CI for odds ratio</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.141</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">final_uci</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Upper CI for odds ratio</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.661</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">final_p</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">P-value for treatment difference at final analysis</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.003</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">final_stop</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Whether the trial is conclusive at final analysis</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">stop</span></p></td><td class=\"cl-ec2911ea\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">Whether the trial was conclusive (at final or interim)</span></p></td><td class=\"cl-ec2911f4\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-ec2911fe\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">flipflop</span></p></td><td class=\"cl-ec2911fe\"><p class=\"cl-ec28ac46\"><span class=\"cl-ec1a97a0\">The probability of trial flip-flopping</span></p></td><td class=\"cl-ec2911ff\"><p class=\"cl-ec28ac64\"><span class=\"cl-ec1a97a0\">0.000</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n\n## Simulate multiple trials\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrunMultipleTrials <- function(nsims, seed, n, recruit_period, p, \n                              events_at_interim, alpha_interim, alpha_final){\n  # random seed\n  seeds <- seed + seq(1: nsims)\n  # simulate\n  multiple_trials <- lapply(1:nsims, function(x){\n    set.seed(seeds[x])\n    y <- runTrial(n, recruit_period, p, events_at_interim, alpha_interim,\n                  alpha_final)\n    return(y)\n  })\n  \n  # summarise\n  results <- lapply(multiple_trials, function(x) return(x$results))\n  results_all <- do.call(rbind, results)\n  # saveRDS(multiple_trials, file = \"results_multTrials.rds\")\n  \n  # remove any trials with non-estimable CIs and calculate summary\n  x <- which(apply(results_all, 1, function(x) any(is.na(x))))\n  if(length(x) > 0){\n    result_summary <- apply(results_all[-x,], 2, summary)\n  } else{\n    result_summary <- apply(results_all, 2, summary)\n  }\n  \n  return(\n    list(\n      results_all = results_all,\n      results_summary = results_summary,\n      seeds = seeds\n    )\n  )\n}\n```\n:::\n\n\nParallelize computations using `future.apply}`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(future.apply)\nlibrary(progressr)\n\nrunMultipleTrials_Parallel <- function(nsims, seed, n, recruit_period, p_param, \n                                       events_at_interim, alpha_interim, alpha_final) {\n  \n  # 1. Setup Parallel Backend\n  # Using 'multisession' is the most stable across Windows/Mac/Linux\n  plan(multisession, workers = parallelly::availableCores() - 1)\n  \n  # Ensure cleanup of workers when function finishes or crashes\n  on.exit(plan(sequential))\n  \n  seeds <- seed + seq_len(nsims)\n  \n  # 2. Access the progressor from the calling environment\n  p <- progressor(steps = nsims)\n  \n  # 3. Run Simulations\n  multiple_trials <- future_lapply(1:nsims, function(i) {\n    # Increment progress bar\n    p(message = sprintf(\"Simulating trial %g\", i))\n    \n    set.seed(seeds[i])\n    \n    # Run the individual trial\n    # Note: I renamed your 'p' to 'p_param' to avoid conflict with progressor 'p'\n    y <- runTrial(n, recruit_period, p_param, events_at_interim, alpha_interim, alpha_final)\n    \n    return(y)\n  }, future.seed = TRUE) \n  \n  # 4. Summarize Results\n  results <- lapply(multiple_trials, function(x) x$results)\n  results_all <- do.call(rbind, results)\n  \n  # Clean up non-estimable rows (NAs from glm failures)\n  results_clean <- results_all[complete.cases(results_all), ]\n  result_summary <- apply(results_clean, 2, summary)\n  \n  return(list(\n    results_all = results_all,\n    results_summary = result_summary,\n    seeds = seeds\n  ))\n}\n```\n:::\n\n\n\n\n\n\n\nPrint results\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntab_mulT <- results_mulT$results_summary |> round(3) |> t() |> as.data.frame()\ntab_mulT$variable <- rownames(tab_mulT)\nrownames(tab_mulT) <- NULL\nnames(tab_mulT) <- c(\"Minimum\", \"Q1\", \"Median\", \"Mean\", \"Q3\", \"Maximum\", \"variable\")\ntab_mulT <- left_join(tab_mulT, dict) \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(variable)`\n```\n\n\n:::\n\n```{.r .cell-code}\ntab_mulT <- tab_mulT |> select(variable, label, everything())\nnames(tab_mulT) <- stringr::str_to_sentence(names(tab_mulT))\n```\n:::\n\n\n\n::: {#tbl-mulT .cell tbl-cap='Results from a multiple simulated trial'}\n\n```{.r .cell-code}\nt_mulT <- flextable(tab_mulT) |> theme_vanilla() \nt_mulT\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-089ff906{}.cl-088e9c92{font-family:'DejaVu Sans';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-088e9ca6{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-08950ee2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-08950ef6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-08955334{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955348{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955352{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955353{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0895535c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955366{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955367{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08955370{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-089ff906'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-08955334\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9c92\">Variable</span></p></th><th class=\"cl-08955334\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9c92\">Label</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Minimum</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Q1</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Median</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Mean</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Q3</span></p></th><th class=\"cl-08955348\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9c92\">Maximum</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-08955352\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">nevents0</span></p></td><td class=\"cl-08955352\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Number of events in control group</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">12.000</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">24.000</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">28.000</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">27.582</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">32.000</span></p></td><td class=\"cl-08955353\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">47.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">nevents1</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Number of events in experimental group</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">9.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">11.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">11.037</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">14.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">25.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">pevents0</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Proportion of events in control group</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.043</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.088</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.099</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.101</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.112</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.254</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">pevents1</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Proportion of events in experimental group</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.005</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.030</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.039</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.039</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.047</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.082</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">sample_size</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Sample size</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">138.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">584.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">584.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">554.664</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">584.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">584.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_time</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Time (days) at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">116.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">243.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">281.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">286.926</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">327.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">565.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_or</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Odds ratio at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.252</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.368</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.408</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.518</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.626</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_lci</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Lower CI for OR at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.083</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.135</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.152</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.201</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.650</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_uci</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Upper CI for OR at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.302</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.760</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.009</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">Inf</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.340</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">Inf</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_p</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">P-value of any difference in treatments at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.014</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.052</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.141</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.175</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">interim_stop</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Whether the trial would have stopped at interim</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.098</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">final_or</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Odds ratio at final analysis</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.059</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.286</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.371</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.391</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.473</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.304</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">final_lci</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Lower CI for odds ratio</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.014</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.135</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.184</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.194</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.240</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.651</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">final_uci</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Upper CI for odds ratio</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.241</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.606</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.750</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.793</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.937</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">2.653</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">final_p</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">P-value for treatment difference at final analysis</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.001</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.006</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.042</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.032</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.994</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">final_stop</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Whether the trial is conclusive at final analysis</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.804</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">stop</span></p></td><td class=\"cl-0895535c\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">Whether the trial was conclusive (at final or interim)</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.805</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td><td class=\"cl-08955366\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-08955367\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">flipflop</span></p></td><td class=\"cl-08955367\"><p class=\"cl-08950ee2\"><span class=\"cl-088e9ca6\">The probability of trial flip-flopping</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.001</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">0.000</span></p></td><td class=\"cl-08955370\"><p class=\"cl-08950ef6\"><span class=\"cl-088e9ca6\">1.000</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/tabwid-1.1.3/tabwid.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}